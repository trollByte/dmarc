# DMARC Report Processor - Environment Configuration
# Copy this file to .env and configure for your environment

# =====================================
# SECURITY - CHANGE THESE BEFORE DEPLOYING
# =====================================
# These credentials are used by docker-compose.yml and must be changed
# from their defaults before running in production.

# PostgreSQL credentials (used by the db service and to build DATABASE_URL)
POSTGRES_USER=dmarc
POSTGRES_PASSWORD=CHANGE_ME_use_strong_password
POSTGRES_DB=dmarc

# Redis password (set empty to disable authentication in development)
REDIS_PASSWORD=CHANGE_ME_use_strong_password

# Flower monitoring dashboard credentials (user:password)
FLOWER_BASIC_AUTH=admin:CHANGE_ME_use_strong_password

# JWT signing key - REQUIRED for authentication
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=CHANGE_ME_generate_with_python_c_import_secrets_print_secrets_token_urlsafe_64

# =====================================
# DATABASE CONFIGURATION
# =====================================
# Note: If you set POSTGRES_USER, POSTGRES_PASSWORD, or POSTGRES_DB above,
# update this URL to match, or let docker-compose.yml build it automatically.
DATABASE_URL=postgresql://dmarc:dmarc@db:5432/dmarc

# =====================================
# EMAIL (IMAP) CONFIGURATION
# =====================================
# Configure these to enable automated email ingestion
EMAIL_HOST=
EMAIL_PORT=993
EMAIL_USER=
EMAIL_PASSWORD=
EMAIL_FOLDER=INBOX
EMAIL_USE_SSL=true

# =====================================
# STORAGE CONFIGURATION
# =====================================
RAW_REPORTS_PATH=/app/storage/raw_reports

# =====================================
# APPLICATION CONFIGURATION
# =====================================
APP_NAME=DMARC Report Processor
DEBUG=false
LOG_LEVEL=INFO

# =====================================
# LOGGING CONFIGURATION
# =====================================
LOG_DIR=/app/logs
LOG_JSON=false
ENABLE_REQUEST_LOGGING=true

# =====================================
# AUTHENTICATION CONFIGURATION
# =====================================
# Set REQUIRE_API_KEY=true in production
REQUIRE_API_KEY=false

# Comma-separated list of valid API keys
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEYS=

# =====================================
# ALERTING CONFIGURATION
# =====================================
# Enable/disable alerting system
ENABLE_ALERTS=false

# Alert thresholds
ALERT_FAILURE_WARNING=10.0    # Warning if >10% failure rate
ALERT_FAILURE_CRITICAL=25.0   # Critical if >25% failure rate
ALERT_VOLUME_SPIKE=50.0       # Alert if volume increases >50%
ALERT_VOLUME_DROP=-30.0       # Alert if volume decreases >30%

# Email notifications (SMTP)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=alerts@example.com
SMTP_USE_TLS=true
ALERT_EMAIL_TO=admin@example.com

# Webhook notifications
SLACK_WEBHOOK_URL=
DISCORD_WEBHOOK_URL=
TEAMS_WEBHOOK_URL=
WEBHOOK_URL=
