# DMARC Report Processor - Production Configuration
# Copy this file to .env.production and configure for production deployment

# =====================================
# DATABASE CONFIGURATION
# =====================================
# Use a strong password and secure connection in production
DATABASE_URL=postgresql://dmarc_user:CHANGE_ME_STRONG_PASSWORD@db:5432/dmarc_prod

# =====================================
# EMAIL (IMAP) CONFIGURATION
# =====================================
# Required for automated email ingestion
EMAIL_HOST=imap.example.com
EMAIL_PORT=993
EMAIL_USER=dmarc-reports@example.com
EMAIL_PASSWORD=CHANGE_ME_EMAIL_PASSWORD
EMAIL_FOLDER=INBOX
EMAIL_USE_SSL=true

# =====================================
# STORAGE CONFIGURATION
# =====================================
RAW_REPORTS_PATH=/app/storage/raw_reports

# =====================================
# APPLICATION CONFIGURATION
# =====================================
APP_NAME=DMARC Report Processor
DEBUG=false
LOG_LEVEL=INFO

# =====================================
# LOGGING CONFIGURATION
# =====================================
LOG_DIR=/app/logs
LOG_JSON=true
ENABLE_REQUEST_LOGGING=true

# =====================================
# AUTHENTICATION CONFIGURATION
# =====================================
# IMPORTANT: Enable API key authentication in production
REQUIRE_API_KEY=true

# Generate secure API keys with:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# Example: multiple keys for different clients/services
API_KEYS=CHANGE_ME_API_KEY_1,CHANGE_ME_API_KEY_2

# =====================================
# ALERTING CONFIGURATION
# =====================================
# Enable alerting in production
ENABLE_ALERTS=true

# Alert thresholds (adjust based on your needs)
ALERT_FAILURE_WARNING=10.0    # Warning if >10% failure rate
ALERT_FAILURE_CRITICAL=25.0   # Critical if >25% failure rate
ALERT_VOLUME_SPIKE=50.0       # Alert if volume increases >50%
ALERT_VOLUME_DROP=-30.0       # Alert if volume decreases >30%

# Email notifications (SMTP)
# Configure your SMTP server for email alerts
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_FROM=dmarc-alerts@yourdomain.com
SMTP_USE_TLS=true
ALERT_EMAIL_TO=admin@yourdomain.com

# Webhook notifications (optional)
# Get webhook URLs from Slack, Discord, or Teams

# Slack: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Discord: Server Settings → Integrations → Webhooks
DISCORD_WEBHOOK_URL=

# Teams: Channel → Connectors → Incoming Webhook
TEAMS_WEBHOOK_URL=

# Generic webhook (custom integration)
WEBHOOK_URL=

# =====================================
# SECURITY NOTES
# =====================================
# 1. Change ALL passwords and API keys before deployment
# 2. Use secrets management (e.g., Docker secrets, AWS Secrets Manager)
# 3. Enable HTTPS/TLS for all external connections
# 4. Restrict database access to backend container only
# 5. Keep this file secure and never commit to version control
# 6. Protect webhook URLs - they provide unauthenticated access
